<!-- 
  PROG 2005 - Programming Mobile Systems
  Assessment 3
  Group: Lydia Pawlus
  File: src/app/pages/manage/manage.page.html
  Purpose: Displays Inventory management page to update and delete existing item records
-->

<!-- Header page title and help button -->
<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title size="large">Manage Inventory</ion-title>

    <!-- Help Widget (opens help popup) -->
    <ion-buttons slot="end">
      <ion-button (click)="openHelp()" aria-label="Help">
        <ion-icon name="help-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- main content -->
<ion-content [fullscreen]="true">

  <!-- If there are items -->
  <ng-container *ngIf="items && items.length; else noItems">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Inventory List</ion-card-title>
        <ion-card-subtitle>Select an item to Update or delete:</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let item of items">
            <ion-label>
              <strong>{{ item.item_name || ('Item #' + item.item_id) }}</strong><br>
              <p>Price: ${{ item.price }}</p>
              <small>Category: {{ item.category }}</small><br>
              <small>
                Qty: {{ item.quantity }}
                • Status: {{ item.stock_status }}
                • ID: {{ item.item_id }}
              </small><br>
              <small *ngIf="item.special_note">
                Special Notes: {{ item.special_note }}
              </small>
            </ion-label>

            <!-- Action buttons on the right -->
            <ion-button size="small" (click)="goToUpdate(item)" slot="end">
              Update
            </ion-button>
            <ion-button size="small" color="danger" (click)="confirmDelete(item)" slot="end">
              Delete
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </ng-container>

  <!-- If there are no items -->
  <ng-template #noItems>
    <ion-card>
      <ion-card-content>
        No items found.
      </ion-card-content>
    </ion-card>
  </ng-template>

</ion-content>
